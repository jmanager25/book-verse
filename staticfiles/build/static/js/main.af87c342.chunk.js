(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),s=a.n(c),o=(a(75),a(16)),i=a.n(o),l=a(14),u=a(20),j=a(124),d=a(125),b=a(120),p=a(123),h=a(121),x=a.p+"static/media/logo.4cdc4e40.png",O=a(28),m=a.n(O),v=a(26),f=a.n(v),g=a(13),N=a(8),w=a(12),_=a.n(w);_.a.default.baseURL="/api",_.a.defaults.headers.post["Content-Type"]="multipart/form-data",_.a.defaults.withCredentials=!0;var C=_.a.create(),A=_.a.create(),y=a(63),S=a(2),k=Object(n.createContext)(),B=Object(n.createContext)(),I=function(){return Object(n.useContext)(B)},P=function(e){var t=e.children,a=Object(n.useState)(null),r=Object(N.a)(a,2),c=r[0],s=r[1],o=Object(y.useHistory)(),i=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.get("/api/dj-rest-auth/user/");case 3:t=e.sent,a=t.data,s(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i()}),[]),Object(n.useMemo)((function(){C.interceptors.request.use(function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.post("/api/dj-rest-auth/token/refresh/");case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),s((function(e){return e&&o.push("/signin"),null})),e.abrupt("return",t);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),A.interceptors.response.use((function(e){return e}),function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==(null===(a=t.response)||void 0===a?void 0:a.status)){e.next=10;break}return e.prev=1,e.next=4,_.a.post("/api/dj-rest-auth/token/refresh/");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),s((function(e){return e&&o.push("/signin"),null}));case 9:return e.abrupt("return",_()(t.config));case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(S.jsx)(k.Provider,{value:c,children:Object(S.jsx)(B.Provider,{value:s,children:t})})},F=a(65),L=a.n(F),U=function(e){var t=e.src,a=e.height,n=void 0===a?45:a,r=e.text;return Object(S.jsxs)("span",{children:[Object(S.jsx)("img",{className:L.a.Avatar,src:t,height:n,width:n,alt:"avatar"}),r]})},T=a(22),M=Object(n.createContext)(Object(T.a)(Object(T.a)({},{text:"",type:""}),{},{setAlert:function(){}})),R=function(e){var t=e.children,a=Object(n.useState)(""),r=Object(N.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(""),i=Object(N.a)(o,2),l=i[0],u=i[1];return Object(S.jsx)(M.Provider,{value:{text:c,type:l,setAlert:function(e,t){s(e),u(t),setTimeout((function(){s(""),u("")}),5e3)}},children:t})},H=M,G=function(){return Object(n.useContext)(H)},Z=function(){var e=Object(n.useContext)(k),t=I(),a=G().setAlert,r=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.post("/api/dj-rest-auth/logout/");case 3:t(null),a("Logout success","success"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a("Logout failed","error"),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),c=Object(S.jsxs)(g.c,{activeClassName:m.a.Active,to:"/books/create",children:[Object(S.jsx)("i",{className:"far fa-plus-square"}),"Add Book"]}),s=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(g.c,{activeClassName:m.a.Active,to:"/profiles/".concat(null===e||void 0===e?void 0:e.profile_id),children:Object(S.jsx)(U,{src:null===e||void 0===e?void 0:e.profile_image,text:null===e||void 0===e?void 0:e.username,height:40})}),Object(S.jsxs)(g.c,{to:"/signin",onClick:r,children:[Object(S.jsx)("i",{className:"fa-solid fa-right-from-bracket"}),"Sign out"]})]}),o=Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(j.a,{className:"ml-auto",children:[Object(S.jsxs)(g.c,{activeClassName:m.a.Active,to:"/signin",children:[Object(S.jsx)("i",{className:"fa-solid fa-right-to-bracket"}),"Sign in"]}),Object(S.jsxs)(g.c,{activeClassName:m.a.Active,to:"/signup",children:[Object(S.jsx)("i",{className:"fa-solid fa-user-plus"}),"Sign up"]})]})});return Object(S.jsx)(d.a,{expand:"md",fixed:"top",className:m.a.NavBar,children:Object(S.jsxs)(b.a,{fluid:!0,children:[Object(S.jsx)(g.c,{to:"/",children:Object(S.jsx)(d.a.Brand,{children:Object(S.jsx)("img",{src:x,alt:"logo",height:"60"})})}),e&&c,Object(S.jsx)(d.a.Toggle,{"aria-controls":"navbarScroll"}),Object(S.jsxs)(d.a.Collapse,{id:"navbarScroll",children:[Object(S.jsxs)(j.a,{className:"mx-auto",children:[Object(S.jsxs)(g.c,{exact:!0,activeClassName:m.a.Active,to:"/",children:[Object(S.jsx)("i",{className:"fa-solid fa-house"}),"Home"]}),e?Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(g.c,{activeClassName:m.a.Active,to:"/mybooks",children:[Object(S.jsx)("i",{className:"fa-solid fa-book"}),"My Books"]})}):null,Object(S.jsxs)(p.a,{className:"d-flex",children:[Object(S.jsx)(p.a.Control,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search"}),Object(S.jsx)(h.a,{className:f.a.Button,children:"Search"})]})]}),Object(S.jsx)(j.a,{children:e?s:o})]})]})})},D=a(10),J=a(6),q=a(19),E=a.n(q),Q=a(126),z=function(){var e,t,a,r,c=Object(n.useState)({username:"",password1:"",password2:""}),s=Object(N.a)(c,2),o=s[0],j=s[1],d=o.username,x=o.password1,O=o.password2,m=Object(n.useState)({}),v=Object(N.a)(m,2),w=v[0],C=v[1],A=Object(D.useHistory)(),y=G().setAlert,k=function(e){j(Object(T.a)(Object(T.a)({},o),{},Object(J.a)({},e.target.name,e.target.value)))},B=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,_.a.post("api/dj-rest-auth/registration/",o);case 4:A.push("/signin"),y("Account created successfully","success"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),C(null===(a=e.t0.response)||void 0===a?void 0:a.data),y("Account creation failed. Please try again","error");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(b.a,{className:E.a.Container,children:Object(S.jsxs)(p.a,{className:E.a.Form,onSubmit:B,children:[Object(S.jsx)("h2",{className:"mb-4 text-center",children:"Sign Up"}),Object(S.jsxs)(p.a.Group,{controlId:"username",children:[Object(S.jsx)(p.a.Label,{className:"d-none",children:"Username"}),Object(S.jsx)(p.a.Control,{type:"text",placeholder:"Username",name:"username",className:E.a.Input,value:d,onChange:k})]}),null===(e=w.username)||void 0===e?void 0:e.map((function(e,t){return Object(S.jsx)(Q.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(S.jsxs)(p.a.Group,{controlId:"password1",children:[Object(S.jsx)(p.a.Label,{className:"d-none",children:"Password"}),Object(S.jsx)(p.a.Control,{type:"password",placeholder:"Password",name:"password1",className:E.a.Input,value:x,onChange:k})]}),null===(t=w.password1)||void 0===t?void 0:t.map((function(e,t){return Object(S.jsx)(Q.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(S.jsxs)(p.a.Group,{controlId:"password2",children:[Object(S.jsx)(p.a.Label,{className:"d-none",children:"Confirm Password"}),Object(S.jsx)(p.a.Control,{type:"Password",placeholder:"Confirm Password",name:"password2",className:E.a.Input,value:O,onChange:k})]}),null===(a=w.password2)||void 0===a?void 0:a.map((function(e,t){return Object(S.jsx)(Q.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(S.jsx)("div",{className:f.a.CenterButton,children:Object(S.jsx)(h.a,{type:"submit",className:f.a.Button,children:"Sign Up"})}),null===(r=w.non_field_errors)||void 0===r?void 0:r.map((function(e,t){return Object(S.jsx)(Q.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(S.jsxs)("p",{className:"".concat(E.a.Text," mt-3"),children:["Already have an account?",Object(S.jsx)(g.b,{to:"/signin",children:"login here"})]})]})})},K=function(){var e,t,a,r=I(),c=G().setAlert,s=Object(n.useState)({username:"",password:""}),o=Object(N.a)(s,2),j=o[0],d=o[1],x=j.username,O=j.password,m=Object(n.useState)({}),v=Object(N.a)(m,2),w=v[0],C=v[1],A=Object(D.useHistory)(),y=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a,n,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,_.a.post("/api/dj-rest-auth/login/",j);case 4:a=e.sent,n=a.data,r(n.user),c("login success","success"),A.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),C(null===(s=e.t0.response)||void 0===s?void 0:s.data),c("login failed","error");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){d(Object(T.a)(Object(T.a)({},j),{},Object(J.a)({},e.target.name,e.target.value)))};return Object(S.jsx)(b.a,{className:E.a.Container,children:Object(S.jsxs)(p.a,{className:E.a.Form,onSubmit:y,children:[Object(S.jsx)("h2",{className:"mb-4 text-center",children:"Sign In"}),Object(S.jsxs)(p.a.Group,{controlId:"username",children:[Object(S.jsx)(p.a.Label,{className:"d-none",children:"Username"}),Object(S.jsx)(p.a.Control,{type:"text",placeholder:"Username",name:"username",className:E.a.Input,value:x,onChange:k})]}),null===(e=w.username)||void 0===e?void 0:e.map((function(e,t){return Object(S.jsx)(Q.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(S.jsxs)(p.a.Group,{controlId:"password",children:[Object(S.jsx)(p.a.Label,{className:"d-none",children:"Password"}),Object(S.jsx)(p.a.Control,{type:"password",placeholder:"Password",name:"password",className:E.a.Input,value:O,onChange:k})]}),null===(t=w.password)||void 0===t?void 0:t.map((function(e,t){return Object(S.jsx)(Q.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(S.jsx)("div",{className:f.a.CenterButton,children:Object(S.jsx)(h.a,{type:"submit",className:f.a.Button,children:"Sign In"})}),null===(a=w.non_field_errors)||void 0===a?void 0:a.map((function(e,t){return Object(S.jsx)(Q.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(S.jsxs)("p",{className:"".concat(E.a.Text," mt-3"),children:["Don't have an account?",Object(S.jsx)(g.b,{to:"/signup",children:"Register here"})]})]})})},V=a(122),W=function(){var e=G(),t=e.text,a=e.type;return t&&a?Object(S.jsx)(V.a,{className:i.a.Alert,severity:a,children:t}):Object(S.jsx)(S.Fragment,{})};var X=function(){return Object(S.jsxs)("div",{className:i.a.App,children:[Object(S.jsx)(Z,{}),Object(S.jsxs)(b.a,{className:i.a.Main,children:[Object(S.jsx)(W,{}),Object(S.jsxs)(D.Switch,{children:[Object(S.jsx)(D.Route,{exact:!0,path:"/",render:function(){return Object(S.jsx)("h1",{children:"Home Page"})}}),Object(S.jsx)(D.Route,{exact:!0,path:"/mybooks",render:function(){return Object(S.jsx)("h1",{children:"My Books"})}}),Object(S.jsx)(D.Route,{exact:!0,path:"/signin",render:function(){return Object(S.jsx)(K,{})}}),Object(S.jsx)(D.Route,{exact:!0,path:"/signup",render:function(){return Object(S.jsx)(z,{})}}),Object(S.jsx)(D.Route,{render:function(){return Object(S.jsx)("p",{children:"404 Page not found"})}})]})]})]})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,127)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(g.a,{children:Object(S.jsx)(P,{children:Object(S.jsx)(R,{children:Object(S.jsx)(X,{})})})})}),document.getElementById("root")),Y()},16:function(e,t,a){e.exports={App:"App_App__16ZpL",Main:"App_Main__HQkvd",Search:"App_Search__3IPKu",Alert:"App_Alert__3Zd3X"}},19:function(e,t,a){e.exports={Input:"SignInUpForm_Input__3xaLZ",Container:"SignInUpForm_Container__2cuBp",Form:"SignInUpForm_Form__2ZPJ4",Text:"SignInUpForm_Text__-5VQs"}},26:function(e,t,a){e.exports={Button:"Button_Button__27i9m",CenterButton:"Button_CenterButton__3iPlz"}},28:function(e,t,a){e.exports={NavBar:"NavBar_NavBar__1amC6",Active:"NavBar_Active__3PBZb"}},65:function(e,t,a){e.exports={Avatar:"Avatar_Avatar__196lW"}},75:function(e,t,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.af87c342.chunk.js.map