(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{15:function(e,t,a){e.exports={Input:"SignInUpForm_Input__3xaLZ",Container:"SignInUpForm_Container__2cuBp",Form:"SignInUpForm_Form__2ZPJ4",Text:"SignInUpForm_Text__-5VQs"}},16:function(e,t,a){e.exports={App:"App_App__16ZpL",Main:"App_Main__HQkvd",Search:"App_Search__3IPKu"}},23:function(e,t,a){e.exports={Button:"Button_Button__27i9m",CenterButton:"Button_CenterButton__3iPlz"}},25:function(e,t,a){e.exports={NavBar:"NavBar_NavBar__1amC6",Active:"NavBar_Active__3PBZb"}},55:function(e,t,a){e.exports={Avatar:"Avatar_Avatar__196lW"}},62:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),c=a.n(s),o=(a(62),a(16)),i=a.n(o),l=a(9),u=a(17),j=a(97),d=a(98),p=a(94),b=a(96),h=a(95),x=a.p+"static/media/logo.4cdc4e40.png",m=a(25),O=a.n(m),v=a(23),f=a.n(v),g=a(8),N=a(18),w=a(10),_=a.n(w);_.a.defaults.headers.post["Content-Type"]="multipart/form-data",_.a.defaults.withCredentials=!0;var C=_.a.create(),k=_.a.create(),S=a(52),A=a(1),y=Object(n.createContext)(),B=Object(n.createContext)(),I=function(){return Object(n.useContext)(y)},P=function(e){var t=e.children,a=Object(n.useState)(null),r=Object(N.a)(a,2),s=r[0],c=r[1],o=Object(S.useHistory)(),i=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/api/dj-rest-auth/user/");case 3:t=e.sent,a=t.data,c(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i()}),[]),Object(n.useMemo)((function(){C.interceptors.request.use(function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.post("/dj-rest-auth/token/refresh/");case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),c((function(e){return e&&o.push("/signin"),null})),e.abrupt("return",t);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),k.interceptors.response.use((function(e){return e}),function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==(null===(a=t.response)||void 0===a?void 0:a.status)){e.next=10;break}return e.prev=1,e.next=4,_.a.post("/dj-rest-auth/token/refresh/");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),c((function(e){return e&&o.push("/signin"),null}));case 9:return e.abrupt("return",_()(t.config));case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(A.jsx)(y.Provider,{value:s,children:Object(A.jsx)(B.Provider,{value:c,children:t})})},F=a(55),U=a.n(F),L=function(e){var t=e.src,a=e.height,n=void 0===a?45:a,r=e.text;return Object(A.jsxs)("span",{children:[Object(A.jsx)("img",{className:U.a.Avatar,src:t,height:n,width:n,alt:"avatar"}),r]})},T=function(){var e=I,t=Object(n.useContext)(B),a=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.post("/api/dj-rest-auth/logout/");case 3:t(null),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),r=Object(A.jsxs)(g.c,{activeClassName:O.a.Active,to:"/books/create",children:[Object(A.jsx)("i",{className:"far fa-plus-square"}),"Add Book"]}),s=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(g.c,{activeClassName:O.a.Active,to:"/profiles/".concat(null===e||void 0===e?void 0:e.profile_id),children:Object(A.jsx)(L,{src:null===e||void 0===e?void 0:e.profile_image,text:null===e||void 0===e?void 0:e.username,height:40})}),Object(A.jsxs)(g.c,{to:"/signin",onClick:a,children:[Object(A.jsx)("i",{className:"fa-solid fa-right-from-bracket"}),"Sign out"]})]}),c=Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(j.a,{className:"ml-auto",children:[Object(A.jsxs)(g.c,{activeClassName:O.a.Active,to:"/signin",children:[Object(A.jsx)("i",{className:"fa-solid fa-right-to-bracket"}),"Sign in"]}),Object(A.jsxs)(g.c,{activeClassName:O.a.Active,to:"/signup",children:[Object(A.jsx)("i",{className:"fa-solid fa-user-plus"}),"Sign up"]})]})});return Object(A.jsx)(d.a,{expand:"md",fixed:"top",className:O.a.NavBar,children:Object(A.jsxs)(p.a,{fluid:!0,children:[Object(A.jsx)(g.c,{to:"/",children:Object(A.jsx)(d.a.Brand,{children:Object(A.jsx)("img",{src:x,alt:"logo",height:"60"})})}),e&&r,Object(A.jsx)(d.a.Toggle,{"aria-controls":"navbarScroll"}),Object(A.jsxs)(d.a.Collapse,{id:"navbarScroll",children:[Object(A.jsxs)(j.a,{className:"mx-auto",children:[e?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(g.c,{exact:!0,activeClassName:O.a.Active,to:"/",children:[Object(A.jsx)("i",{className:"fa-solid fa-house"}),"Home"]}),Object(A.jsxs)(g.c,{activeClassName:O.a.Active,to:"/mybooks",children:[Object(A.jsx)("i",{className:"fa-solid fa-book"}),"My Books"]})]}):null,Object(A.jsxs)(b.a,{className:"d-flex",children:[Object(A.jsx)(b.a.Control,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search"}),Object(A.jsx)(h.a,{className:f.a.Button,children:"Search"})]})]}),Object(A.jsx)(j.a,{children:e?s:c})]})]})})},M=a(6),H=a(31),R=a(33),G=a(15),D=a.n(G),Z=a(99),J=function(){var e,t,a,r,s=Object(n.useState)({username:"",password1:"",password2:""}),c=Object(N.a)(s,2),o=c[0],j=c[1],d=o.username,x=o.password1,m=o.password2,O=Object(n.useState)({}),v=Object(N.a)(O,2),w=v[0],C=v[1],k=Object(M.useHistory)(),S=function(e){j(Object(R.a)(Object(R.a)({},o),{},Object(H.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,_.a.post("api/dj-rest-auth/registration/",o);case 4:k.push("/signin"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),C(null===(a=e.t0.response)||void 0===a?void 0:a.data);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsx)(p.a,{className:D.a.Container,children:Object(A.jsxs)(b.a,{className:D.a.Form,onSubmit:y,children:[Object(A.jsx)("h2",{className:"mb-4 text-center",children:"Sign Up"}),Object(A.jsxs)(b.a.Group,{controlId:"username",children:[Object(A.jsx)(b.a.Label,{className:"d-none",children:"Username"}),Object(A.jsx)(b.a.Control,{type:"text",placeholder:"Username",name:"username",className:D.a.Input,value:d,onChange:S})]}),null===(e=w.username)||void 0===e?void 0:e.map((function(e,t){return Object(A.jsx)(Z.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(A.jsxs)(b.a.Group,{controlId:"password1",children:[Object(A.jsx)(b.a.Label,{className:"d-none",children:"Password"}),Object(A.jsx)(b.a.Control,{type:"password",placeholder:"Password",name:"password1",className:D.a.Input,value:x,onChange:S})]}),null===(t=w.password1)||void 0===t?void 0:t.map((function(e,t){return Object(A.jsx)(Z.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(A.jsxs)(b.a.Group,{controlId:"password2",children:[Object(A.jsx)(b.a.Label,{className:"d-none",children:"Confirm Password"}),Object(A.jsx)(b.a.Control,{type:"Password",placeholder:"Confirm Password",name:"password2",className:D.a.Input,value:m,onChange:S})]}),null===(a=w.password2)||void 0===a?void 0:a.map((function(e,t){return Object(A.jsx)(Z.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(A.jsx)("div",{className:f.a.CenterButton,children:Object(A.jsx)(h.a,{type:"submit",className:f.a.Button,children:"Sign Up"})}),null===(r=w.non_field_errors)||void 0===r?void 0:r.map((function(e,t){return Object(A.jsx)(Z.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(A.jsxs)("p",{className:"".concat(D.a.Text," mt-3"),children:["Already have an account?",Object(A.jsx)(g.b,{to:"/signin",children:"login here"})]})]})})},q=function(){var e,t,a,r=I,s=Object(n.useState)({username:"",password:""}),c=Object(N.a)(s,2),o=c[0],j=c[1],d=o.username,x=o.password,m=Object(n.useState)({}),O=Object(N.a)(m,2),v=O[0],w=O[1],C=Object(M.useHistory)(),k=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a,n,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,_.a.post("/api/dj-rest-auth/login/",o);case 4:a=e.sent,n=a.data,r(n.user),C.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),w(null===(s=e.t0.response)||void 0===s?void 0:s.data);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e){j(Object(R.a)(Object(R.a)({},o),{},Object(H.a)({},e.target.name,e.target.value)))};return Object(A.jsx)(p.a,{className:D.a.Container,children:Object(A.jsxs)(b.a,{className:D.a.Form,onSubmit:k,children:[Object(A.jsx)("h2",{className:"mb-4 text-center",children:"Sign In"}),Object(A.jsxs)(b.a.Group,{controlId:"username",children:[Object(A.jsx)(b.a.Label,{className:"d-none",children:"Username"}),Object(A.jsx)(b.a.Control,{type:"text",placeholder:"Username",name:"username",className:D.a.Input,value:d,onChange:S})]}),null===(e=v.username)||void 0===e?void 0:e.map((function(e,t){return Object(A.jsx)(Z.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(A.jsxs)(b.a.Group,{controlId:"password",children:[Object(A.jsx)(b.a.Label,{className:"d-none",children:"Password"}),Object(A.jsx)(b.a.Control,{type:"password",placeholder:"Password",name:"password",className:D.a.Input,value:x,onChange:S})]}),null===(t=v.password)||void 0===t?void 0:t.map((function(e,t){return Object(A.jsx)(Z.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(A.jsx)("div",{className:f.a.CenterButton,children:Object(A.jsx)(h.a,{type:"submit",className:f.a.Button,children:"Sign In"})}),null===(a=v.non_field_errors)||void 0===a?void 0:a.map((function(e,t){return Object(A.jsx)(Z.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(A.jsxs)("p",{className:"".concat(D.a.Text," mt-3"),children:["Don't have an account?",Object(A.jsx)(g.b,{to:"/signup",children:"Register here"})]})]})})};var E=function(){return Object(A.jsxs)("div",{className:i.a.App,children:[Object(A.jsx)(T,{}),Object(A.jsx)(p.a,{className:i.a.Main,children:Object(A.jsxs)(M.Switch,{children:[Object(A.jsx)(M.Route,{exact:!0,path:"/",render:function(){return Object(A.jsx)("h1",{children:"Home Page"})}}),Object(A.jsx)(M.Route,{exact:!0,path:"/mybooks",render:function(){return Object(A.jsx)("h1",{children:"My Books"})}}),Object(A.jsx)(M.Route,{exact:!0,path:"/signin",render:function(){return Object(A.jsx)(q,{})}}),Object(A.jsx)(M.Route,{exact:!0,path:"/signup",render:function(){return Object(A.jsx)(J,{})}}),Object(A.jsx)(M.Route,{render:function(){return Object(A.jsx)("p",{children:"404 Page not found"})}})]})})]})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,100)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(g.a,{children:Object(A.jsx)(P,{children:Object(A.jsx)(E,{})})})}),document.getElementById("root")),Q()}},[[92,1,2]]]);
//# sourceMappingURL=main.2a9ec773.chunk.js.map