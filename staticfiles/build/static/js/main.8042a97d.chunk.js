(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),s=a.n(c),o=(a(76),a(11)),i=a.n(o),l=a(13),u=a(21),j=a(125),d=a(126),b=a(121),p=a(124),m=a(122),O=a.p+"static/media/logo.4cdc4e40.png",x=a(29),h=a.n(x),v=a(22),f=a.n(v),g=a(14),N=a(7),C=a(15),_=a.n(C);_.a.defaults.headers.post["Content-Type"]="multipart/form-data",_.a.defaults.withCredentials=!0;var w=_.a.create(),A=_.a.create(),k=a(45),y=a(1),F=Object(n.createContext)(),S=Object(n.createContext)(),B=function(){return Object(n.useContext)(S)},I=function(e){var t=e.children,a=Object(n.useState)(null),r=Object(N.a)(a,2),c=r[0],s=r[1],o=Object(k.useHistory)(),i=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.get("/api/dj-rest-auth/user/");case 3:t=e.sent,a=t.data,s(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i()}),[]),Object(n.useMemo)((function(){w.interceptors.request.use(function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.post("/api/dj-rest-auth/token/refresh/");case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),s((function(e){return e&&o.push("/signin"),null})),e.abrupt("return",t);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),A.interceptors.response.use((function(e){return e}),function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==(null===(a=t.response)||void 0===a?void 0:a.status)){e.next=10;break}return e.prev=1,e.next=4,_.a.post("/api/dj-rest-auth/token/refresh/");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),s((function(e){return e&&o.push("/signin"),null}));case 9:return e.abrupt("return",_()(t.config));case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(y.jsx)(F.Provider,{value:c,children:Object(y.jsx)(S.Provider,{value:s,children:t})})},L=a(66),P=a.n(L),R=function(e){var t=e.src,a=e.height,n=void 0===a?45:a,r=e.text;return Object(y.jsxs)("span",{children:[Object(y.jsx)("img",{className:P.a.Avatar,src:t,height:n,width:n,alt:"avatar"}),r]})},U=a(18),G=Object(n.createContext)(Object(U.a)(Object(U.a)({},{text:"",type:""}),{},{setAlert:function(){}})),E=function(e){var t=e.children,a=Object(n.useState)(""),r=Object(N.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(""),i=Object(N.a)(o,2),l=i[0],u=i[1];return Object(y.jsx)(G.Provider,{value:{text:c,type:l,setAlert:function(e,t){s(e),u(t),setTimeout((function(){s(""),u("")}),5e3)}},children:t})},T=G,D=function(){return Object(n.useContext)(T)},H=function(){var e=Object(n.useState)(!1),t=Object(N.a)(e,2),a=t[0],r=t[1],c=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=function(e){c.current&&!c.current.contains(e.target)&&r(!1)};return document.addEventListener("mouseup",e),function(){document.removeEventListener("mouseup",e)}}),[c]),{expanded:a,setExpanded:r,ref:c}},M=function(){var e=Object(n.useContext)(F),t=B(),a=D().setAlert,r=H(),c=r.expanded,s=r.setExpanded,o=r.ref,i=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.post("/api/dj-rest-auth/logout/");case 3:t(null),a("Logout success","success"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a("Logout failed","error"),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),x=Object(y.jsxs)(g.c,{activeClassName:h.a.Active,to:"/books/create",children:[Object(y.jsx)("i",{className:"far fa-plus-square"}),"Add Book"]}),v=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(g.c,{activeClassName:h.a.Active,to:"/profiles/".concat(null===e||void 0===e?void 0:e.profile_id),children:Object(y.jsx)(R,{src:null===e||void 0===e?void 0:e.profile_image,text:null===e||void 0===e?void 0:e.username,height:40})}),Object(y.jsxs)(g.c,{to:"/signin",onClick:i,children:[Object(y.jsx)("i",{className:"fa-solid fa-right-from-bracket"}),"Sign out"]})]}),N=Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(j.a,{className:"ml-auto",children:[Object(y.jsxs)(g.c,{activeClassName:h.a.Active,to:"/signin",children:[Object(y.jsx)("i",{className:"fa-solid fa-right-to-bracket"}),"Sign in"]}),Object(y.jsxs)(g.c,{activeClassName:h.a.Active,to:"/signup",children:[Object(y.jsx)("i",{className:"fa-solid fa-user-plus"}),"Sign up"]})]})});return Object(y.jsx)(d.a,{expanded:c,expand:"md",fixed:"top",className:h.a.NavBar,children:Object(y.jsxs)(b.a,{fluid:!0,children:[Object(y.jsx)(g.c,{to:"/",children:Object(y.jsx)(d.a.Brand,{children:Object(y.jsx)("img",{src:O,alt:"logo",height:"60"})})}),e&&x,Object(y.jsx)(d.a.Toggle,{ref:o,onClick:function(){return s(!c)},"aria-controls":"navbarScroll"}),Object(y.jsxs)(d.a.Collapse,{id:"navbarScroll",children:[Object(y.jsxs)(j.a,{className:"mx-auto",children:[Object(y.jsxs)(g.c,{exact:!0,activeClassName:h.a.Active,to:"/",children:[Object(y.jsx)("i",{className:"fa-solid fa-house"}),"Home"]}),e?Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(g.c,{activeClassName:h.a.Active,to:"/mybooks",children:[Object(y.jsx)("i",{className:"fa-solid fa-book"}),"My Books"]})}):null,Object(y.jsxs)(p.a,{className:"d-flex",children:[Object(y.jsx)(p.a.Control,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search"}),Object(y.jsx)(m.a,{className:f.a.Button,children:"Search"})]})]}),Object(y.jsx)(j.a,{children:e?v:N})]})]})})},Z=a(10),q=a(6),J=a(20),Q=a.n(J),V=a(127),z=function(){var e,t,a,r,c=Object(n.useState)({username:"",password1:"",password2:""}),s=Object(N.a)(c,2),o=s[0],j=s[1],d=o.username,O=o.password1,x=o.password2,h=Object(n.useState)({}),v=Object(N.a)(h,2),C=v[0],w=v[1],A=Object(Z.useHistory)(),k=D().setAlert,F=function(e){j(Object(U.a)(Object(U.a)({},o),{},Object(q.a)({},e.target.name,e.target.value)))},S=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,_.a.post("api/dj-rest-auth/registration/",o);case 4:A.push("/signin"),k("Account created successfully","success"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),w(null===(a=e.t0.response)||void 0===a?void 0:a.data),k("Account creation failed. Please try again","error");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)(b.a,{className:Q.a.Container,children:Object(y.jsxs)(p.a,{className:Q.a.Form,onSubmit:S,children:[Object(y.jsx)("h2",{className:"mb-4 text-center",children:"Sign Up"}),Object(y.jsxs)(p.a.Group,{controlId:"username",children:[Object(y.jsx)(p.a.Label,{className:"d-none",children:"Username"}),Object(y.jsx)(p.a.Control,{type:"text",placeholder:"Username",name:"username",className:Q.a.Input,value:d,onChange:F})]}),null===(e=C.username)||void 0===e?void 0:e.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)(p.a.Group,{controlId:"password1",children:[Object(y.jsx)(p.a.Label,{className:"d-none",children:"Password"}),Object(y.jsx)(p.a.Control,{type:"password",placeholder:"Password",name:"password1",className:Q.a.Input,value:O,onChange:F})]}),null===(t=C.password1)||void 0===t?void 0:t.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)(p.a.Group,{controlId:"password2",children:[Object(y.jsx)(p.a.Label,{className:"d-none",children:"Confirm Password"}),Object(y.jsx)(p.a.Control,{type:"Password",placeholder:"Confirm Password",name:"password2",className:Q.a.Input,value:x,onChange:F})]}),null===(a=C.password2)||void 0===a?void 0:a.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsx)("div",{className:f.a.CenterButton,children:Object(y.jsx)(m.a,{type:"submit",className:f.a.Button,children:"Sign Up"})}),null===(r=C.non_field_errors)||void 0===r?void 0:r.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)("p",{className:"".concat(Q.a.Text," mt-3"),children:["Already have an account?",Object(y.jsx)(g.b,{to:"/signin",children:"login here"})]})]})})},K=function(){var e,t,a,r=B(),c=D().setAlert,s=Object(n.useState)({username:"",password:""}),o=Object(N.a)(s,2),j=o[0],d=o[1],O=j.username,x=j.password,h=Object(n.useState)({}),v=Object(N.a)(h,2),C=v[0],w=v[1],A=Object(Z.useHistory)(),k=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a,n,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,_.a.post("/api/dj-rest-auth/login/",j);case 4:a=e.sent,n=a.data,r(n.user),c("login success","success"),A.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),w(null===(s=e.t0.response)||void 0===s?void 0:s.data),c("login failed","error");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),F=function(e){d(Object(U.a)(Object(U.a)({},j),{},Object(q.a)({},e.target.name,e.target.value)))};return Object(y.jsx)(b.a,{className:Q.a.Container,children:Object(y.jsxs)(p.a,{className:Q.a.Form,onSubmit:k,children:[Object(y.jsx)("h2",{className:"mb-4 text-center",children:"Sign In"}),Object(y.jsxs)(p.a.Group,{controlId:"username",children:[Object(y.jsx)(p.a.Label,{className:"d-none",children:"Username"}),Object(y.jsx)(p.a.Control,{type:"text",placeholder:"Username",name:"username",className:Q.a.Input,value:O,onChange:F})]}),null===(e=C.username)||void 0===e?void 0:e.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)(p.a.Group,{controlId:"password",children:[Object(y.jsx)(p.a.Label,{className:"d-none",children:"Password"}),Object(y.jsx)(p.a.Control,{type:"password",placeholder:"Password",name:"password",className:Q.a.Input,value:x,onChange:F})]}),null===(t=C.password)||void 0===t?void 0:t.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsx)("div",{className:f.a.CenterButton,children:Object(y.jsx)(m.a,{type:"submit",className:f.a.Button,children:"Sign In"})}),null===(a=C.non_field_errors)||void 0===a?void 0:a.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)("p",{className:"".concat(Q.a.Text," mt-3"),children:["Don't have an account?",Object(y.jsx)(g.b,{to:"/signup",children:"Register here"})]})]})})},W=a(123),X=function(){var e=D(),t=e.text,a=e.type;return t&&a?Object(y.jsx)(W.a,{className:i.a.Alert,severity:a,children:t}):Object(y.jsx)(y.Fragment,{})},Y=a(23),$=a.n(Y);var ee=function(){var e,t,a,r,c,s=Object(n.useState)({}),o=Object(N.a)(s,2),j=o[0],d=o[1],b=Object(n.useState)({title:"",author:"",description:"",genre:"",coverImage:""}),O=Object(N.a)(b,2),x=O[0],h=O[1],v=x.title,g=x.author,C=x.description,_=x.genre,A=x.coverImage,F=Object(n.useRef)(null),S=Object(k.useHistory)(),B=D().setAlert,I=function(e){h(Object(U.a)(Object(U.a)({},x),{},Object(q.a)({},e.target.name,e.target.value)))},L=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var a,n,r,c,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=new FormData).append("title",v),a.append("author",g),a.append("description",C),a.append("genre",_),a.append("cover_image",F.current.files[0]),e.prev=7,e.next=10,w.post("/api/books/",a);case 10:n=e.sent,r=n.data,S.push("/books/".concat(r.id)),B("Book added successfully","success"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0),401!==(null===(c=e.t0.response)||void 0===c?void 0:c.status)&&(d(null===(s=e.t0.response)||void 0===s?void 0:s.data),B("Failed to add a book","error"));case 20:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(p.a,{className:$.a.Form,onSubmit:L,children:[Object(y.jsxs)(p.a.Group,{controlId:"title",children:[Object(y.jsx)(p.a.Label,{className:$.a.FormLabel,children:"Title"}),Object(y.jsx)(p.a.Control,{className:$.a.FormControl,type:"text",name:"title",value:v,onChange:I})]}),null===j||void 0===j||null===(e=j.title)||void 0===e?void 0:e.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)(p.a.Group,{controlId:"author",children:[Object(y.jsx)(p.a.Label,{className:$.a.FormLabel,children:"Author"}),Object(y.jsx)(p.a.Control,{className:$.a.FormControl,type:"text",name:"author",value:g,onChange:I})]}),null===j||void 0===j||null===(t=j.author)||void 0===t?void 0:t.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)(p.a.Group,{controlId:"genre",children:[Object(y.jsx)(p.a.Label,{className:$.a.FormLabel,children:"Genre"}),Object(y.jsx)(p.a.Control,{className:$.a.FormControl,type:"text",name:"genre",value:_,onChange:I})]}),null===j||void 0===j||null===(a=j.genre)||void 0===a?void 0:a.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)(p.a.Group,{controlId:"description",children:[Object(y.jsx)(p.a.Label,{className:$.a.FormLabel,children:"Summary"}),Object(y.jsx)(p.a.Control,{className:$.a.FormControl,as:"textarea",name:"description",value:C,onChange:I})]}),null===j||void 0===j||null===(r=j.description)||void 0===r?void 0:r.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)(p.a.Group,{controlId:"cover_image",children:[Object(y.jsx)(p.a.Label,{className:$.a.FormLabel,children:"Cover Image"}),Object(y.jsx)(p.a.File,{name:"cover_image",accept:"image/*",onChange:function(e){e.target.files.length&&(URL.revokeObjectURL(A),h(Object(U.a)(Object(U.a)({},x),{},{coverImage:URL.createObjectURL(e.target.files[0])})))},ref:F})]}),null===j||void 0===j||null===(c=j.coverImage)||void 0===c?void 0:c.map((function(e,t){return Object(y.jsx)(V.a,{className:i.a.Alert,variant:"warning",children:e},t)})),Object(y.jsxs)("div",{className:f.a.CenterButton,children:[Object(y.jsx)(m.a,{className:f.a.Danger,onClick:function(){return S.goBack()},children:"Cancel"}),Object(y.jsx)(m.a,{className:f.a.Button,type:"Submit",children:"Submit"})]})]})};var te=function(){return Object(y.jsxs)("div",{className:i.a.App,children:[Object(y.jsx)(M,{}),Object(y.jsxs)(b.a,{className:i.a.Main,children:[Object(y.jsx)(X,{}),Object(y.jsxs)(Z.Switch,{children:[Object(y.jsx)(Z.Route,{exact:!0,path:"/",render:function(){return Object(y.jsx)("h1",{children:"Home Page"})}}),Object(y.jsx)(Z.Route,{exact:!0,path:"/mybooks",render:function(){return Object(y.jsx)("h1",{children:"My Books"})}}),Object(y.jsx)(Z.Route,{exact:!0,path:"/signin",render:function(){return Object(y.jsx)(K,{})}}),Object(y.jsx)(Z.Route,{exact:!0,path:"/signup",render:function(){return Object(y.jsx)(z,{})}}),Object(y.jsx)(Z.Route,{exact:!0,path:"/books/create",render:function(){return Object(y.jsx)(ee,{})}}),Object(y.jsx)(Z.Route,{render:function(){return Object(y.jsx)("p",{children:"404 Page not found"})}})]})]})]})},ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,128)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(g.a,{children:Object(y.jsx)(I,{children:Object(y.jsx)(E,{children:Object(y.jsx)(te,{})})})})}),document.getElementById("root")),ae()},11:function(e,t,a){e.exports={App:"App_App__16ZpL",Main:"App_Main__HQkvd",Search:"App_Search__3IPKu",Alert:"App_Alert__3Zd3X"}},20:function(e,t,a){e.exports={Input:"SignInUpForm_Input__3xaLZ",Container:"SignInUpForm_Container__2cuBp",Form:"SignInUpForm_Form__2ZPJ4",Text:"SignInUpForm_Text__-5VQs"}},22:function(e,t,a){e.exports={Button:"Button_Button__27i9m",CenterButton:"Button_CenterButton__3iPlz",Danger:"Button_Danger__LnRwy"}},23:function(e,t,a){e.exports={Form:"BookCreateEditForm_Form__317oo",FormLabel:"BookCreateEditForm_FormLabel__31yum",FormControl:"BookCreateEditForm_FormControl__6q4yV"}},29:function(e,t,a){e.exports={NavBar:"NavBar_NavBar__1amC6",Active:"NavBar_Active__3PBZb"}},66:function(e,t,a){e.exports={Avatar:"Avatar_Avatar__196lW"}},76:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.8042a97d.chunk.js.map